-- CREAZIONE TABELLE
create table utente (
	email varchar(255) primary key not null,
	password varchar(255) not null,
	nome varchar(255) not null,
	cognome varchar(255) not null
);

create table carta_di_credito (
	numero varchar(16) primary key not null,
	intestatario varchar(255) not null,
	scadenza date not null,
	cvv int not null,
	utente varchar(255),
	foreign key (utente) references utente(email)
);

create table indirizzo (
	id int generated by default as identity primary key,
	via varchar(255) not null,
	numero_civico int not null,
	cap varchar(5) not null,
	citta varchar(255) not null,
	stato varchar(255) not null
);

create table indirizzo_spedizione (
	utente varchar(255) not null,
	indirizzo int not null,
	primary key (utente, indirizzo),
	foreign key (utente) references utente(email),
	foreign key (indirizzo) references indirizzo(id)

);

create table lista (
	id int generated by default as identity primary key,
	nome varchar(255) not null,
	utente varchar(255) not null,
	data_creazione date not null,
	data_modifica date not null,
	foreign key (utente) references utente(email)
);

create table ordine (
	lista int primary key not null,
	indirizzo int not null,
	provider varchar(255) not null,
	status varchar(255) not null,
	foreign key (lista) references lista(id),
	foreign key (indirizzo) references indirizzo(id)
);

create table categoria (
	nome varchar(255) primary key not null,
	descrizione varchar(255) not null
);

create table prodotto (
	id int generated by default as identity primary key,
	nome varchar(255) not null,
	descrizione varchar(255) not null,
	prezzo float not null,
	quantita int not null,
	tag varchar(255) not null,
	foreign key (tag) references categoria(nome)
);

create table contenuto (
	lista int not null,
	prodotto int not null,
	quantita int not null,
	primary key (lista, prodotto),
	foreign key (lista) references lista(id),
	foreign key (prodotto) references prodotto(id)
);

--  POPOLAMENTO DELLE TABELLE
INSERT INTO utente (email, password, nome, cognome) VALUES
('mauro.cattaneo@gmail.com', 'password', 'Mauro', 'Cattaneo'),
('arturo.rizzo@gmail.com', 'password', 'arturo', 'rizzo'),
('sandro.schiavone@gmail.com', 'password', 'sandro', 'schiavone'),
('mauro.giordano@gmail.com', 'password', 'mauro', 'giordano'),
('cristiano.giordano@gmail.com', 'password', 'cristiano', 'giordano'),
('lavinia.toscano@gmail.com', 'password', 'lavinia', 'toscano'),
('miriam.angelo@gmail.com', 'password', 'miriam', 'angelo'),
('leila.costa@gmail.com', 'password', 'leila', 'costa'),
('melania.calabrese@gmail.com', 'password', 'melania', 'calabrese'),
('arianna.palermo@gmail.com', 'password', 'arianna', 'palermo');

INSERT INTO carta_di_credito (numero, intestatario, scadenza, cvv, utente) VALUES
('4619859532357609', 'Mauro Cattaneo', '2026-01-01', '443', 'mauro.cattaneo@gmail.com'),
('4694038576505583', 'Arturo Rizzo', '2025-10-01', '057', 'arturo.rizzo@gmail.com'),
('4822293516814513', 'Sandro Schiavone', '2027-11-01', '447', 'sandro.schiavone@gmail.com'),
('4280794322027690', 'Mauro Giordano', '2026-08-01', '485', 'mauro.giordano@gmail.com'),
('4119865677385466', 'Cristiano Giordano', '2026-08-01', '212', 'cristiano.giordano@gmail.com'),
('4365747884217099', 'Lavinia Toscano', '2024-07-01', '290', 'lavinia.toscano@gmail.com'),
('4268601990913463', 'Miriam Angelo', '2028-01-01', '441', 'miriam.angelo@gmail.com'),
('4784837462867218', 'Leila Costa', '2028-02-01', '755', 'leila.costa@gmail.com'),
('4991830720961864', 'Melania Calabrese', '2025-01-01', '502', 'melania.calabrese@gmail.com'),
('4022707262300912', 'Arianna Palermo', '2026-09-01', '801', 'arianna.palermo@gmail.com');

INSERT INTO indirizzo (via, numero_civico, cap, citta, stato) VALUES
('Borgo Marianita', 0, '18555', 'Quarto Enzo', 'IT'),
('Rotonda Grasso', 3, '56927', 'Perugia', 'IT'),
('Contrada Gilda', 274, '07196', 'Settimo Sibilla Taranto', 'IT'),
('Via Longo', 7, '24972', 'Sibilla Ligure Ascoli Piceno', 'IT'),
('Rotonda Donati', 878, '83908', 'De Luca Calabro Rimini', 'IT'),
('Contrada Farina', 0, '29268', 'Quarto Rudy Terme Cagliari', 'IT'),
('Strada Giulietta', 764, '66241', 'Palmieri Sardo Palermo', 'IT'),
('Piazza Giovanna', 5, '78711', 'Guerra A Mare Siracusa', 'IT'),
('Via Sartori', 7, '31777', 'Lino Umbro Ferrara', 'IT'),
('Rotonda Deborah', 199, '24900', 'Quarto Fiorentino Sardo Sassari', 'IT'),
('Via Castellana', 100, '31060', 'Resana', 'IT');

-- da popolare in un secondo momento.
INSERT INTO lista (nome, utente, data_creazione, data_modifica) VALUES 
('carrello mauro', 'mauro.cattaneo@gmail.com', '2022-08-09', '2022-08-09'),
('carrello arturo', 'arturo.rizzo@gmail.com', '2022-09-09', '2022-09-09'),
('carrello sandro', 'sandro.schiavone@gmail.com', '2022-08-19', '2022-08-19'),
('carrello mauro', 'mauro.giordano@gmail.com', '2022-08-19', '2022-08-19'),
('carrello cristiano', 'cristiano.giordano@gmail.com', '2022-08-21', '2022-08-22'),
('carrello lavinia', 'lavinia.toscano@gmail.com', '2022-09-19', '2022-09-19'),
('carrello lavinia', 'lavinia.toscano@gmail.com', '2023-01-10', '2023-01-10'),
('carrello miriam', 'miriam.angelo@gmail.com', '2023-02-20', '2023-02-20'),
('carrello melania calabrese', 'melania.calabrese@gmail.com', '2023-02-20', '2023-02-20');

INSERT INTO categoria (nome, descrizione) VALUES
('Scarpe da trekking', 'descrizione'),
('Zaini da montagna', 'descrizione'), 
('Felpe', 'descrizione'), 
('Tute da sci', 'descrizione');

-- seconda parte popolamento.
INSERT INTO indirizzo_spedizione (utente, indirizzo) VALUES
('mauro.cattaneo@gmail.com', 1),
('mauro.cattaneo@gmail.com', 11),
('arturo.rizzo@gmail.com', 2),
('sandro.schiavone@gmail.com', 3),
('mauro.giordano@gmail.com', 4),
('cristiano.giordano@gmail.com', 5),
('lavinia.toscano@gmail.com', 6),
('miriam.angelo@gmail.com', 7),
('leila.costa@gmail.com', 8),
('melania.calabrese@gmail.com', 9),
('arianna.palermo@gmail.com', 10);

INSERT INTO prodotto (nome, descrizione, prezzo, quantita, tag) VALUES 
('Scarpe trekking donna MH100 MID', 'scarpe da trekking', 60.99, 100, 'Scarpe da trekking'),
('Scarpe trekking uomo Columbia REDBUD TRANSALP', 'scarpe da trekking', 74.99, 100, 'Scarpe da trekking'),
('Scarpe trekking bambino Adidas HYPERHIKER LOW nere', 'scarpe da trekking', 29.99, 100, 'Scarpe da trekking'),
('Scarpe trekking uomo MH100 WTP', 'scarpe da trekking', 50.99, 100, 'Scarpe da trekking'),
('Giacca sci uomo 500 gialla e nera', 'tuta da sci da uomo', 129.99, 100, 'Tute da sci'),
('Giacca sci uomo 500 bianca', 'tuta da sci da uomo', 119.99, 100, 'Tute da sci'),
('Pantaloni sci donna 100 neri', 'tuta da sci da donna', 24.99, 100, 'Tute da sci'),
('Felpa pile Sport invernali Verde Cenere Uomo', 'felpa da uomo', 69.99, 100, 'Felpe'),
('Felpa pile Sport invernali Bianco panna Uomo', 'felpa da uomo', 49.99, 100, 'Felpe'),
('Felpa pile Sport invernali Verde Cenere Donna', 'felpa da donna', 69.99, 100, 'Felpe'),
('Felpa pile Sport invernali Bianco panna Donna', 'felpa da donna', 49.99, 100, 'Felpe'),
('Zaino trekking 20 L nero', 'zaino 20L', 12.99, 100, 'Zaini da montagna'),
('Zaino trekking 30L nero', 'zaino 30L', 19.99, 100, 'Zaini da montagna'),
('Zaino trekking 40L', 'zaino 42L', 75.99, 100, 'Zaini da montagna');

INSERT INTO ordine (lista, indirizzo, provider, status) VALUES
(1, 11, 'EClothMountain', 'effettuato'),
(2, 2, 'EClothMountain', 'effettuato'),
(3, 3, 'EClothMountain', 'effettuato'),
(4, 4, 'EClothMountain', 'effettuato'),
(5, 5, 'EClothMountain', 'effettuato'),
(6, 6, 'EClothMountain', 'spedito'),
(7, 6, 'EClothMountain', 'spedito'),
(8, 7, 'EClothMountain', 'spedito'),
(9, 9, 'EClothMountain', 'spedito');

-- terza parte del popolamento
INSERT INTO contenuto (lista, prodotto, quantita) VALUES
(1, 4, 1),
(1, 1, 2),
(1, 2, 3),
(1, 3, 1),
(2, 5, 2),
(2, 6, 1),
(3, 1, 1),
(4, 2, 2),
(5, 9, 3),
(6, 13, 1),
(6, 14, 3),
(6, 1, 1),
(7, 3, 2),
(8, 4, 3),
(9, 5, 1);
